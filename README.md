# Пульт охраны банка

Программа представляет собой пульт управления для охранника банка. С ее помощью охранник знает, кто и когда заходил в хранилище банка, кто находится в хранилище в данный момент, сколько времени сотрудник провел в хранилище и является ли посещение подозрительным.

Используется система карт доступа, хранящихся в базе данных.

### Основные возможности

* Просмотр списка активных карт доступа:
    * Имя владельца
    * Код пропуска
    * Дата регистрации пропуска
* Просмотр информации о конкретном пропуске:
    * Когда владелец посетил хранилище
    * Продолжительность посещения хранилища
    * Был ли визит подозрителен
* Просмотр информации о текущих посещениях хранилища:
    * Кто зашел в хранилище
    * Когда зашел в хранилище
    * Сколько находится в хранилище
    * Является ли визит подозрительным

### Как установить

1. Клонируйте репозиторий на компьютер

```
git clone https://github.com/StableBig/django-orm-watching-storage.git
```

2. Создайте и активируйте виртуальное окружение:

```
python3 -m venv venv
source venv/bin/activate
```

3. Установите все необходимые зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```

### Настройка переменных окружения

Создайте файл `.env` в корневой директории проекта и укажите следующие переменные:

* `DATABASE_ENGINE`: Используемый движок базы данных. Например: django.db.backends.postgresql.
* `DATABASE_HOST`: Адрес сервера базы данных.
* `DATABASE_PORT`: Порт для подключения к базе данных.
* `DATABASE_NAME`: Название базы данных.
* `DATABASE_USER`: Имя пользователя базы данных.
* `DATABASE_PASSWORD`: Пароль от базы данных.
* `SECRET_KEY`: Секретный ключ Django.
* `DEBUG`: Включение/выключение режима отладки Django (True/False).
* `ALLOWED_HOSTS`: Список разрешенных хостов, разделенный запятыми. Например: "localhost,127.0.0.1,yourdomain.com".

### Запуск проекта

```
python3 manage.py runserver
```

После этого проект будет доступен по адресу http://127.0.0.1:8000/.

### Использование

* Откройте главную страницу, чтобы увидеть список активных карт доступа.
* Щелкните по имени владельца пропуска, чтобы увидеть информацию о карте доступа.
* Щелкните на ссылку "Список пользователей в хранилище", чтобы увидеть информацию о текущих посещениях хранилища.


### Файлы проекта

В проекте есть несколько ключевых файлов и директорий:

* `manage.py`: Главный скрипт Django для управления проектом.
* `project/settings.py`: Настройки проекта Django.
* `project/urls.py`: Определения URL проекта.
* `datacenter/models.py`: Определения моделей данных.
* `datacenter/active_passcards_view.py`: Представление для отображения активных пропусков.
* `datacenter/passcard_info_view.py`: Представление для отображения информации о пропуске.
* `datacenter/storage_information_view.py`: Представление для отображения информации о текущих посещениях хранилища.
* `datacenter/common_functions.py`: Общие функции для вычисления продолжительности посещения и т.д.
* `templates/`: Директория с HTML-шаблонами проекта.
    * `templates/active_passcards_view.py`: Извлекает все активные карты доступа и отображает их на странице "Активные карты доступа".
    * `templates/passcard_info_view.py`: Получает информацию о конкретной карте доступа и связанных с ней визитах. Для каждого визита вычисляется его продолжительность и определяется, был ли визит подозрительным.
    * `templates/storage_information_view.py`: Извлекает информацию о всех текущих визитах.

В проекте используется Bootstrap для удобной стилизации веб-страниц.

### Цель проекта

Код написан в образовательных целях.
